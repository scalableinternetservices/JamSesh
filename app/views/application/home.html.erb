<div class="container">
  <h1>Meet our users!</h1>

<%= form_tag(root_path, :method => "get", id: "search-form") do %>
<%= text_field_tag :location, params[:location], placeholder: "Find by location" %>
<%= text_field_tag :age, params[:age], placeholder: "Find by age" %>
<%= text_field_tag :instrument, params[:instrument], placeholder: "Find by instrument" %>
<%= submit_tag "Search" %>
<% end %>

  <table class="table table-striped">
    <thead>
      <tr>
        <th>Name</th>
        <th>Age</th>
        <th>Location</th>
        <th>Instruments</th>
        <th>Date Joined</th>
      </tr>
    </thead>
    <tbody>
      <% if @profiles.present? %>
        <% @profiles.each do |profile| %>
          <tr>
            <td><%= profile.first_name + ' ' + profile.last_name%></td>
            <td><%= profile.age %></td>
            <td><%= profile.location %></td>
            <td>
            <% profile.instrument.each do |instrument| %>
              <%= instrument.name %>
              <% end %>
            </td>
            <td><%= profile.created_at.to_date.to_formatted_s(:rfc822) %></td>
            
          </tr>
        <% end %>
      <% else %>
      <p>We could not find users matching your search request.</p>
    <% end %>
    </tbody>
  </table>
</div>
